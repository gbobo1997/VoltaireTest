<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Home</title>
	<link rel="stylesheet" href="styles2.css">
  <body id="body">
  	<section>
  		<div class="column">
      Menu Bar
      <button type="button" onclick="logout()">Logout</button>
      <button type="button" onclick="addGroup()">Add Group</button>
      <button type="button" onclick="editGroup()">Edit Group</button>
    </div>
  	</section>
    <div id="myModal" class="modal">

    <!-- Modal content - popup menu for group -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <form id="groupAction "action="">
      Group Name:<br>
      <input id="groupNameForm" type="text" name="groupName" value="abcd">
      <input id="gsb"type="submit" value="Create">
      <input type="hidden" id="delete" value="Delete" onclick="">
      </form>       
    </div>

  </div>
  	<section>
  		<div class="columnScroll" id="columnOne">First</div>
  		<div class="columnScroll" id="fillMe">
        <section class="messaging"> 
        <div class="row" id="output">Output</div> 
        <div class="row">
          <form>
            Message: <input type="text"  name="textInput" id="tInput">
            <input type="button" value="Send" onclick="sendMessage()">
          </form>
        </div>   
        </section>    
      </div>
      
  		<div class="columnScroll">Third</div>
  	</section>
    <script>
      listGroups();
      var span = document.getElementsByClassName("close")[0];
      var modal = document.getElementById('myModal');  
      var currentGroup = 'Home';
      span.onclick = function() {
        modal.style.display = "none";
      }
      window.onclick = function(event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }


      var loremIpsum = require('lorem-ipsum');
      var output = loremIpsum(
        {
          count: 10,
          units: 'paragraphs'
        }
      );
      //document.getElementById("output").innerHTML += output;
        //austin test

      function logout()
      {
        // clear all local storage
        localStorage.clear();
        window.location.href = 'index.html';
      }

      /* Techncally we would call this method, then pass the 
      arguments to the message parser that would package
      all of the needed info and then post the request to the 
      webserver but for now this works as a base lol */
      function sendMessage()
      {
        document.getElementById('output').innerHTML += document.getElementById('tInput').value;
        document.getElementById('tInput').value= '';
      }

      function addGroup()
      {
        document.getElementById('delete').type = 'hidden';       
        modal.style.display = "block"; 
        alert("Group name already taken.");

      }

      function deleteGroup(groupID)
      {
        document.getElementById(groupID).innerHTML = '';
      }

      function editGroup()
      {
        addGroup();
        document.getElementById('groupNameForm').value = currentGroup;    
        document.getElementById('gsb').value = 'Edit'; 
        document.getElementById('delete').type = 'Submit'; 

      }

      function listGroups()
      {
        // would be used on document run to make an api call and load all user associated groups into first column
        // will just do static for now
        // was gonna use tuples here but JS doesnt have it ???
        var content;
        var testGroups = ['School', 'Work', 'Gaming'];
        var tGImages = ['unco_logo_bear.jpg', 'google.jpg', '1_up.jpg'];
        var i;
        for (i = 0; i < testGroups.length; i++)
        {
            content+='<div id="'+testGroups[i]+'" onclick="changeGroup('+testGroups[i]+')">';
            content+= '<img style="border-radius: 50%; height: 50px; width: 50px;" src="images/'+tGImages[i]+'" alt="Avatar"><br>'+testGroups[i]+'<br>';
            content+='<hr></div>';
        }
        document.getElementById('columnOne').innerHTML+='<br><br>'+content;
      }

      function changeGroup(group)
      {
        currentGroup = group;
      }
    </script>

  </body>
</html>
